---
layout: post
title: í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ê²Œì„ ì¹´ë“œì˜ ë°ì´í„°ë¥¼ í¬ë¡¤ë§í•˜ëŠ” ì‘ì—…
tag: Ensemble_stars, project
---

# ë°ì´í„°ê°€ ìˆì–´ì•¼ ë¬´ì–¸ê°€ ì‹œì‘í•  ìˆ˜ ìˆë‹¤...?!?!!

ë§ ê·¸ëŒ€ë¡œ, í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë°°ìš´ ë‚˜ëŠ” í° ë²½ì— ë§‰í˜€ìˆë‹¤. ì›¹ì‚¬ì´íŠ¸ ë§Œë“¤ê¸°? í• ìˆ˜ì•¼ ìˆì§€. ê·¼ë° ìƒê°í•´ë³´ì. 
ë¬´ìŠ¨ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ê±´ì§€, ì–´ë–¤ ê¸°ëŠ¥ì„ í† ëŒ€ë¡œ í• ê±´ì§€, ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ì–´ë–¤ ì •ë³´ê°€ í•„ìš”í•œì§€ ë“±ë“±ì— ëŒ€í•œ ì •í™•í•œ ëª…ì„¸ì„œê°€ ì—†ë‹¤.

ê·¸ë˜ì„œ ì¼ë‹¨ ë‚´ê°€ ì•ìœ¼ë¡œ ì œì‘í•  í”„ë¡œì íŠ¸ì˜ ë©”ì¸ í¬ì¸íŠ¸ì¸ ì¹´ë“œì •ë³´ì™€ ì¹´ë“œ ì´ë¯¸ì§€ë“±ì˜ ë°ì´í„°ê°€ í•„ìš”í•˜ë‹¤.
ì´ ë°ì´í„°ê°€ ìˆì–´ì•¼ ë‚˜ì¤‘ì— ë§Œë“¤ì–´ì§ˆ 'íš¨ìœ¨ë± ì¶”ì²œê¸°ëŠ¥'ì„ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

## ë°ì´í„°ë¥¼ ì–»ê¸°ìœ„í•œ ë°©ë²•ì— ëŒ€í•´ì„œ

ì´ë²ˆ í”„ë¡œì íŠ¸ì— í•„ìš”í•œ 'ì•™ìƒë¸” ìŠ¤íƒ€ì¦ˆ!!'ë¼ëŠ” ê²Œì„ì—ì„  ë”°ë¡œ ì •ë³´ì— ëŒ€í•œ APIê°€ ì—†ìœ¼ë©°, ì‹¬ì§€ì–´ ê³µì‹ì‚¬ì´íŠ¸ì—ì„œë„ ì œê³µí•´ì£¼ì§€ ì•ŠëŠ”ë‹¤.
ë‹¨ì§€, ì¹´ë“œê°€ ê¸°ê°„ì—ë§ê²Œ ê³µê°œë˜ê³ , ê·¸ ì¹´ë“œì— ëŒ€í•œ ì •ë³´ë¥¼ ì—¬ëŸ¬ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ìœ ì € ë˜ëŠ” íŠ¹ì • íŒ¬ë¤ì‚¬ì´íŠ¸ì—ì„œ ê¸°ì…í•˜ëŠ” ëŠë‚Œì´ë‹¤. (ë‚´ê°€ ì•Œê¸°ë¡  í˜„ì¬ ê·¸ë ‡ë‹¤.)

ê·¸ë˜ì„œ ì¹´ë“œì— ëŒ€í•œ ì •ë³´ë¶€í„° ì‹œì‘í•´ì„œ ì´ë¯¸ì§€, CGë°ì´í„°ë¥¼ ì–»ëŠ” ë°©ë²•ì— ëŒ€í•´ ìƒê°í•´ ë³´ì•˜ë‹¤.

1. [Fandom-Ensemble-Stars](https://ensemble-stars.fandom.com/) ì‚¬ì´íŠ¸ì—ì„œ í¬ë¡¤ë§í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
2. í•œêµ­ì˜ í•œ ìœ ì €ë¶„ì´ ë§Œë“  'êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸'ë¡œ ì œì‘ëœ **íš¨ìœ¨ë± ì¶”ì²œì‹œíŠ¸**ë¼ëŠ” ì—‘ì…€ì‹œíŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
3. [Enstars.info](https://enstars.info/)ë¼ëŠ” ì‚¬ì´íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ê°€ì ¸ì˜¨ë‹¤.

ë¼ëŠ” í¬ê²Œ 3ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬í–ˆë‹¤.

ë¨¼ì € 3ë²ˆë¶€í„° ë³´ìë©´, í•´ì™¸ì˜ í•œ ìœ ì €ê°€ ì·¨ë¯¸ë¡œ ë§Œë“  ì›¹ì‚¬ì´íŠ¸ë¡œ ë³´ì—¬ì¡Œë‹¤. ë‹¤ë§Œ, ì§€ê¸ˆìœ¼ë¡œë¶€í„° ì•½ 2ë…„ì „ë¶€í„° ì—…ë°ì´íŠ¸ ë˜ì§€ì•Šì•„, ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸°ì— í˜ë“¤ë‹¤ëŠ” ì ì´ ìˆì—ˆë‹¤.

ê·¸ ë‹¤ìŒ 2ë²ˆê°™ì€ ê²½ìš°ì— 'êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸'ë¥¼ ì‚¬ìš©í•˜ì—¬ ì œì‘í•œ ì—‘ì…€ì‹œíŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ë°, ì´ê±´ í•œêµ­ì–´ë¡œ ë²ˆì—­ë„ ë˜ì–´ìˆê³  ì´ë¯¸ì§€ì™€ ê°ì¢… ì—¬ëŸ¬ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì—¬ ë‚˜ì—ê²Œ ê°€ì¥ í•„ìš”í•œ ë°ì´í„°ì˜€ë‹¤.
í•˜ì§€ë§Œ ê¶Œí•œì˜ ë¬¸ì œë¡œ í•´ë‹¹ ì‹œíŠ¸ë¥¼ ì™„ì „íˆ í¬ë¡¤ë§í•˜ëŠ” ë¶€ë¶„ì—ì„œ ë¬¸ì œê°€ ìˆì—ˆë‹¤.

ë§ˆì§€ë§‰ 1ë²ˆê°™ì€ ê²½ìš°ëŠ” í¬ë¡¤ë§ì— ì„±ê³µí–ˆë‹¤.
ë‹¤ë§Œ, ì‚¬ì´íŠ¸ê°€ ì˜ì–´ë¡œëœ ì‚¬ì´íŠ¸ì´ê¸°ì— ì¹´ë“œì˜ ì •ë³´ë˜í•œ ì˜ì–´ë¡œ ê¸°ì…ë˜ì–´ ìˆë‹¤ëŠ” ì¹˜ëª…ì  ë‹¨ì ì´ ì¡´ì¬í–ˆë‹¤.

## íŒŒì´ì¬ìœ¼ë¡œ í¬ë¡¤ë§í•˜ì—¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

```python
import requests
from bs4 import BeautifulSoup
import json

class EnsembleCard:
    def __init__(self, name, unbloomed_card, bloomed_card, table_data):
        self.name = name
        self.unbloomed_card = unbloomed_card
        self.bloomed_card = bloomed_card
        self.table_data = self.process_table_data(table_data)

    def process_table_data(self, table_data):
        processed_data = {}
        for key, values in table_data.items():
            processed_data[key] = [self.process_value(value) for value in values]
        return processed_data

    def process_value(self, value):
        parts = value.split()
        if len(parts) == 2:
            category, amount = parts
            return {category: amount}
        return {}

    def __str__(self):
        return f"EnsembleCard(name={self.name}, " \
               f"unbloomed_card={self.unbloomed_card}, bloomed_card={self.bloomed_card}, table_data={self.table_data})"

def scrape_and_save_data(url, output_file_path):
    # ì‚¬ì´íŠ¸ì— ì ‘ì†
    response = requests.get(url)

    # ì‘ë‹µì´ ì •ìƒì ì¸ì§€ í™•ì¸
    if response.status_code == 200:
        soup = BeautifulSoup(response.text, 'html.parser')

        # ë°ì´í„° ì¶”ì¶œ ë° ê°ì²´ ìƒì„±
        card_name_tag = soup.find('h1', class_='page-header__title')
        card_name = card_name_tag.text.strip() if card_name_tag else "Unknown"

        # ì¶”ê°€ë¡œ ê°€ì ¸ì˜¬ ì´ë¯¸ì§€ ë°ì´í„°
        unbloomed_card_tag = soup.find('div', class_='card-single card-unbloomed')
        unbloomed_card = unbloomed_card_tag.find('img')['src'] if unbloomed_card_tag else None

        bloomed_card_tag = soup.find('div', class_='card-single card-bloomed')
        bloomed_card = bloomed_card_tag.find('img')['src'] if bloomed_card_tag else None

        # ì¶”ê°€ë¡œ ê°€ì ¸ì˜¬ í…Œì´ë¸” ë°ì´í„° (data-item-name="card-stats-music" ì†ì„±ì„ ê°€ì§„ section ë‚´ë¶€ì˜ í…Œì´ë¸”)
        music_section = soup.find('section', {'data-item-name': 'card-stats-music'})
        table_data = {}
        if music_section:
            table = music_section.find('table')
            if table:
                tbody = table.find('tbody')
                if tbody:
                    for tr in tbody.find_all('tr'):
                        th = tr.find('th')
                        tds = tr.find_all('td')
                        if th and tds:
                            key = th.text.strip()
                            values = [td.text.strip() for td in tds]
                            table_data[key] = values

            # ê°ì²´ ìƒì„±
            ensemble_card = EnsembleCard(name=card_name,
                                         unbloomed_card=unbloomed_card, bloomed_card=bloomed_card, table_data=table_data)

            # JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            ensemble_card_json = json.dumps(ensemble_card.__dict__, ensure_ascii=False, indent=2)

            # JSON íŒŒì¼ì— ì“°ê¸°
            with open(output_file_path, 'w', encoding='utf-8') as json_file:
                json_file.write(ensemble_card_json)

            print(f'Data saved to {output_file_path}')
        else:
            print('Error: Section not found with data-item-name="card-stats-music".')
    else:
        print(f'Error: {response.status_code}')

  

# í•¨ìˆ˜ í˜¸ì¶œ ì˜ˆì‹œ
scrape_and_save_data('https://ensemble-stars.fandom.com/wiki/(Crown_of_the_Blue_Sea)_Tori_Himemiya', 'Tori.json')

```

ì‚¬ì‹¤ ìë°”ìŠ¤í¬ë¦½íŠ¸ë§Œ í•˜ë‹¤ê°€ íŒŒì´ì¬ì„ í•˜ëŠ”ê±´ ì²˜ìŒì´ë¼, AIì˜ ë„ì›€ì„ ë°›ì•„ì„œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.

ì½”ë“œì˜ ë¡œì§ì„ ì‚´í´ë³´ìë©´,
1. ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì‚¬ì´íŠ¸ì— ì ‘ì†í•œë‹¤.
2. ì •ìƒì ìœ¼ë¡œ ì§„ì…ì´ ì™„ë£Œë˜ë©´, ì¶”ì¶œí•  ë°ì´í„°ë¥¼ ì°¾ê³ , ê°€ì ¸ì˜¨ë‹¤.
3. ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ê°ì²´í™” ì‹œí‚¤ê³  ì €ì¥í•œë‹¤.

ë¼ëŠ” ë¡œì§ì´ë‹¤.


## ì‚½ì§ˆí•˜ë‹¤ ì‹œê°„ì„ í—ˆë¹„í•œ ê³¼ê±°ì˜ ë‚˜ ğŸ¥²

ì‚¬ì‹¤ ì´ ì‚¬ì´íŠ¸ì—ì„œ ì¢€ ì‹œê°„ì„ ë§ì´ í—ˆë¹„í•œ ë¶€ë¶„ì´ ìˆëŠ”ë°, ê²°ë¡ ì ìœ¼ë¡œ ë»˜ì§“í•œê±°ì˜€ë‹¤.

ê·¸ ì‚½ì§ˆì´ ë¬´ì—‡ì¸ê°€ì— ëŒ€í•´ì„œ ê°„ë‹¨íˆ ì´ì•¼ê¸° í•˜ë ¤í•œë‹¤.

ë¨¼ì € ì‚¬ì´íŠ¸ì˜ ì´ë¯¸ì§€ë¥¼ ë³´ìë©´,

<img width="553" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-29 á„‹á…©á„’á…® 3 02 18" src="https://github.com/bomlang/bomlang.github.io/assets/61110237/deea0693-35a2-4859-8b3e-682c2daa3405">

<img width="553" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-29 á„‹á…©á„’á…® 3 02 02" src="https://github.com/bomlang/bomlang.github.io/assets/61110237/da008048-4ec2-450a-ade0-cea25163c533">

ìœ„ì— ë‘ê°œì˜ ì‚¬ì§„ì´ ìˆëŠ”ë°, ì²«ë²ˆì§¸ëŠ” Basicì´ë¼ëŠ” ì˜ˆì „ ë²„ì „ì˜ ê²Œì„ë°ì´í„°ë‹¤.
í˜„ì¬ ë‚´ê°€ í”„ë¡œì íŠ¸ë¡œ í•˜ë ¤ëŠ” ê²Œì„ì€ ë‘ê°€ì§€ ë²„ì „ì´ ìˆëŠ”ë°, Basicrê³¼ Musicì´ë‹¤. 
ë‚´ê°€ í•„ìš”ë¡œ í•˜ëŠ” ë°ì´í„°ëŠ” ë‘ë²ˆì§¸ ì‚¬ì§„ì¸ Musicë°ì´í„°ì´ë‹¤.
ì‹¬ì§€ì–´ ì´ë¯¸ì§€ë§ˆì € ë‹¤ë¥´ê¸°(ìƒ‰ì´ ë‹¤ë¥´ë‹¤)ë•Œë¬¸ì— ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ê³ ë¯¼ì´ ë§ì´ í•„ìš”í–ˆë‹¤.

ì²˜ìŒì—ëŠ” ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ë°ì´í„°ê°€ ë°”ë€ŒëŠ” ë°©ì‹ì¸ì¤„ ì•Œì•˜ë‹¤.
í•˜ì§€ë§Œ í¬ë¡¤ë§ì€ ì²˜ìŒ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë“¤ì–´ê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ì ì¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì—, ì´ˆê¸° í™”ë©´ì¸ Basicì„ ê°€ì ¸ì˜¤ëŠ” ì¤„ ì•Œì•˜ê³ , ë‚˜ëŠ” Music ë²„íŠ¼ì´ ëˆŒë¦° ë°ì´í„°ê°€ í•„ìš”í–ˆê¸°ì— ê³ ë¯¼ í•  ìˆ˜ë°–ì— ì—†ì—ˆë‹¤.

ê·¸ë˜ì„œ ì„ íƒí•œ ìˆ˜ë‹¨ì´ ë°”ë¡œ seleniumì´ë‹¤.

```python
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from bs4 import BeautifulSoup
import json

class EnsembleCard:
    def __init__(self, name, unbloomed_card, bloomed_card, table_data):
        self.name = name
        self.unbloomed_card = unbloomed_card
        self.bloomed_card = bloomed_card
        self.table_data = table_data

    def __str__(self):
        return f"EnsembleCard(name={self.name}, " \
               f"unbloomed_card={self.unbloomed_card}, bloomed_card={self.bloomed_card}, table_data={self.table_data})"

# í¬ë¡¬ ë“œë¼ì´ë²„ ê²½ë¡œ ì„¤ì • (ë³¸ì¸ì˜ í™˜ê²½ì— ë§ê²Œ ì„¤ì •)
chrome_driver_path = '/Users/holee/desktop/Ensamble/Ensemble_cardData/chromedriver-mac-arm64'

# í¬ë¡¬ ì˜µì…˜ ì„¤ì •
chrome_options = Options()
chrome_options.add_argument('--headless')  # ë§Œì•½ í™”ë©´ì´ í•„ìš” ì—†ë‹¤ë©´ headless ëª¨ë“œë¡œ ì„¤ì •

# í¬ë¡¤ë§í•  í˜ì´ì§€ URL
url = 'https://ensemble-stars.fandom.com/wiki/(Crown_of_the_Blue_Sea)_Tori_Himemiya'

# Seleniumìœ¼ë¡œ ë²„íŠ¼ í´ë¦­í•˜ì—¬ ë°ì´í„° ë¡œë“œ
with webdriver.Chrome(options=chrome_options, executable_path=chrome_driver_path) as driver:
    driver.get(url)

    # ë‘ ë²ˆì§¸ íƒ­ìœ¼ë¡œ ì´ë™
    music_tab = driver.find_element_by_css_selector('li[data-item-name="card-music"]')
    music_tab.click()

    # í˜ì´ì§€ ì†ŒìŠ¤ë¥¼ BeautifulSoupìœ¼ë¡œ íŒŒì‹±
    soup = BeautifulSoup(driver.page_source, 'html.parser')

    # ì¶”ê°€ë¡œ ê°€ì ¸ì˜¬ í…Œì´ë¸” ë°ì´í„° (ë‘ ë²ˆì§¸ í…Œì´ë¸” ì‹ë³„ì ì‚¬ìš©)
    second_table = soup.find('table', {'class': 'wikitable'})
    table_data = {}
    if second_table:
        tbody = second_table.find('tbody')
        if tbody:
            for tr in tbody.find_all('tr'):
                th = tr.find('th')
                tds = tr.find_all('td')
                if th and tds:
                    key = th.text.strip()
                    values = [td.text.strip() for td in tds]
                    table_data[key] = values

    # ì¶”ê°€ë¡œ ê°€ì ¸ì˜¬ ì´ë¯¸ì§€ ë°ì´í„°
    unbloomed_card_tag = soup.find('div', class_='card-single card-unbloomed')
    unbloomed_card = unbloomed_card_tag.find('img')['src'] if unbloomed_card_tag else None

    bloomed_card_tag = soup.find('div', class_='card-single card-bloomed')
    bloomed_card = bloomed_card_tag.find('img')['src'] if bloomed_card_tag else None

    # ê°ì²´ ìƒì„±
    ensemble_card = EnsembleCard(name="Tori Himemiya",
                                 unbloomed_card=unbloomed_card, bloomed_card=bloomed_card, table_data=table_data)

    # JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    ensemble_card_json = json.dumps(ensemble_card.__dict__, ensure_ascii=False, indent=2)

    # JSON íŒŒì¼ì— ì“°ê¸°
    output_file_path = 'torii.json'
    with open(output_file_path, 'w', encoding='utf-8') as json_file:
        json_file.write(ensemble_card_json)

    print(f'Data saved to {output_file_path}')
```

ì´ ì½”ë“œë¥¼ ë³´ë©´ seleniumì„ ì‚¬ìš©í•˜ê³ , êµ¬ê¸€ ë“œë¼ì´ë²„ë¥¼ ë‹¤ìš´ë°›ì•„ ì‚¬ìš©í–ˆë‹¤.

ë¬¼ë¡  ì½”ë“œëŠ” ì •ìƒì ìœ¼ë¡œ ì˜ ì‘ë™í–ˆë‹¤.
í•˜ì§€ë§Œ ë‚´ê°€ ì›í•˜ëŠ” Musicë°ì´í„°ê°€ ì•„ë‹Œ Basicë°ì´í„°ê°€ ê°€ì ¸ì™€ì¡Œë‹¤.

## ë¬¸ì œì˜ ì›ì¸ì€ ë°”ë¡œë°”ë¡œ...

ë¬¸ì œì˜ ì›ì¸ì€ ì²˜ìŒë¶€í„° Basicê³¼ Musicì´ ë²„íŠ¼ì— ì˜í•´ ê°’ì´ ë°”ë€ŒëŠ”ê²Œ ì•„ë‹ˆë¼, ì²˜ìŒë¶€í„° sectionë‹¨ìœ„ë¡œ í˜ì´ì§€ê°€ ë‘ê°œê°€ ìˆì—ˆê³ , ë²„íŠ¼ì„ ëˆ„ë¥¼ë•Œ í•´ë‹¹ ì„¹ì…˜ì´ displayì— ì˜í•´ì„œ ìˆ¨ê²¨ì¡Œë‹¤ ë³´ì—¬ì¡Œë‹¤ í•˜ëŠ” í˜•ì‹ì´ì—ˆë˜ ê±°ê°™ë‹¤.
ë‚´ê°€ ì›í•˜ëŠ” ë°ì´í„°ëŠ” `table`íƒœê·¸ì˜ ë°ì´í„°ì˜€ëŠ”ë°, htmlì„ ìì„¸íˆ ì‚´í´ë³´ë‹ˆ ê°€ì¥ ì•„ë«ë‹¨ì— ìˆì—ˆë‹¤.

í•˜í•˜.. ğŸ˜µâ€ğŸ’«

ì´ì œ ë°ì´í„°ëŠ” ê°€ì ¸ì™€ì¡Œìœ¼ë‹ˆ supabaseì— ë„£ì–´ì•¼ í•˜ëŠ”ë°, í…Œì´ë¸”ì„ ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ í•´ì•¼í• ì§€ ê³ ë¯¼ì´ë‹¤.
ì•ìœ¼ë¡œ ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œ ê¸°íšì„ ì¢€ ë” êµ¬ìƒí•´ë´ì•¼ê² ë‹¤.
