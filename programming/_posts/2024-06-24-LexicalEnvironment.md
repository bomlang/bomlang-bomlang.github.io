---
layout: post
title: 주소창에 ’www.google.com‘을 입력하면 어떤 일이 일어날까?
tag: 렉시컬 환경, lexical environment, scope
---

# 스코프와 함께 렉시컬 환경(lexical environment)에 대해서 다시 기억하기.

## 왜 자바스크립트 개발자들은 var를 쓰지 말라고 하는가?

자바스크립트 초기에 쓰였던 var가 있다. 현재 지금까지도 사용이 가능하지만, var의 위험성에 대해서 검색해보면 많은 사용자들이 사용을 멈춰달라 말하고있다.

왜 쓰지말라는가에 대해서 결론을 간단하게 말하자면 호이스팅과 관련되어 있다. var를 사용하면 '함수(function)레벨'로 호이스팅이 되는데, 호이스팅이 되면서 변수를 undefined로 초기화한다. 이로인해 코드를 작성하였을 때 var로 선언한 값으로 인해서 코드의 결과를 예측하기 어려울 뿐만 아니라, undefined라는 값을 가지므로 오류또한 찾기 어렵기에 개발자입장에서 에러를 찾기 힘들 수 있다.

호이스팅과 렉시컬 환경
제목은 렉시컬 환경인데 어째서 var에 대한 이야기와 호이스팅에 대한 이야기를 하고있는지 의문이 들 수 있다. 그렇지만 서론에서 이에대한 이야기를 간단히 집고가야 앞으로 나올 렉시컬 환경에 대해서 이야기 하기 쉽겠다는 생각에 이야기를 하였다. 앞서 말했던 호이스팅과 렉시컬 환경이 아주 관련이 있기 때문이다.

렉시컬 환경과 스코프(Scope)
렉시컬 환경을 알기 위해서는 스코프에 대한 이해가 필요하다. 먼저 자바스크립트에서 스코프는 크게

1. 전역 스코프(Global Scope)
2. 지역 스코프(Local Scope)
   로 나뉜다.

그리고 유효 범위가 존재하는데,

1. 전역(Global)
2. 함수(Function)
3. 블록(Block)
   레벨의 유효범위가 존재한다.

먼저 자바스크립트파일 index.js를 실행했다고 가정하자.
그러면 모든 코드를 읽으면서 함수단위의 스코프를 모두 호이스팅 할 것인데, 이때 어디로 호이스팅되는지가 렉시컬환경을 이해하는데 중요하다.

간단하게 코드로 예를들어 렉시컬환경에 대해서 설명해보도록 하겠다.

```html
<script>
  var = 1;

  function foo() {
  	var x = 10;
      bar();
  }

  function bar() {
  	console.log(x);
  }

  foo(); // 1
  bar(); // 1
</script>
```

- 출처 : (https://lulu-developmentlog.tistory.com/258)

현재 script라는 html태그로 이해하기 쉽게 자바스크립트 코드를 감싸줬다. script부분이 실행되면, 먼저 script라는 전역스코프(global scope)범위의 환경이 생성된다. 그 다음 var가 함수스코프(function scope)범위에서 환경이 생성된다.

똑같이 나머지 foo()함수와 bar()함수가 함수스코프 범위에서 환경이 생성되고, 이는 글로벌스코프입장에서 봤을때 지역범위가 된다.

조금 햇갈린다면 foo()함수를 보자. foo()함수에도 var로 변수를 선언한다. 이때 var x의 입장에서 foo()함수는 전역스코프이고, x는 지역스코프이다.

즉, 현재 자신이 속해있는 범위의 스코프 범위를 지역스코프라 명하며, 그 환경위의 범위를 글로벌 스코프라 칭한다.

렉시컬 환경은 합집합처럼 생긴 형태인가?
처음 렉시컬 환경을 접했을 때 쉽게 이해하기 위해서 합집합의 개념처럼 그림을 그려소 이해하는게 쉽긴 하다. 본인도 처음에는 그런 줄 알았다.

하지만, 합집합의 개념으로 이해해서는 안된다.
먼저 '스코프마다 메모리가 정해지고, 이 메모리는 서로 다르다' 라는 개념에 대해서 알면 좋다.

위 코드를 봤을때 script라는 전역스코프라는 메모리가 생성되었고, 다음 var라는 변수 메모리, foo()함수에 대한 메모리가 생성되는 개념이다.

이쯤되면 의문이 생길것이다.
그러면 자식스코프가 부모스코프로부터 값을 가져오려고 할 때 메모리가 다르면 어떻게 하는가?
그래서 서로 연결되어있다. 또는 참조한다고 생각하면 된다.
이것을 'outer environment'라고 한다.

출처 - (https://velog.io/@paulkim/e)

## 끝내며

정말 간략한 설명으로 글을 작성하였다.
자바스크립트에 클로져또한 이 렉시컬 환경에 대해서 이해하는데서 시작한다. 렉시컬 환경에 대해서 잘 이해하는것이 자바스크립트를 딥하게 이해하는데 가장
