---
layout: post
title: NEXT.js를 사용하기 위한 SSR과 CSR에 대한 글
tag: Next.js, SSR, CSR
---

# Next.js 를 사용하기 위해서 알아야 할 점 (CSR에서 SSR로 넘어가자)

프론트엔드 개발자가 되고싶다면 현재 Next.js가 아주 각광받는것을 알 수 있다. 가끔 '홀라'라는 프로젝트 인원을 모집하는 페이지만 보아도 프론트엔드에서 Next를 사용하지 못하면 참여할 수 있는 프로젝트가 많이 존재하지 않는다. 앞으로 취업후에도 회사에 들어가서 Next를 사용할거니까 미리미리 공부해두는게 좋을거 같아서 최근 인터넷강의를 시청하고있다.
Next에 대한 강의를 시청하면서 기존 리액트, 예를들어 CRA를 사용한 웹페이지와 Next를 사용한 웹페이지를 비교하여 보여주는 영상이 나온다. 이는 CSR과 SSR의 차이점을 보여주는 강의였다.
평소에도 CSR과 SSR에 대해서 차이점이 무엇이냐라고 누군가 묻는다면 간단히 형식적으로 대답할 수 있을정도 수준이었다. 하지만 실제로 Next를 구동하거나 차이점을 눈으로 보지 않아서 와닿지 않는 부분이 있었는데, 이 부분을 해당 강의를 보면서 차이점을 명확하게 느꼈다.

아무튼 기존 React를 CRA를 사용하던가 VITE를 사용해서 CSR을 하였다면, 이제 Next로 넘어가기 위해선 SSR에 대해서 이해하고 넘어갈 필요가 있다는 뜻이다.

## CSR과 SSR이 뭔데?

### CSR을 먼저 알아보자

바닐라 자바스크립트에서 벗어나 이제 리액트단계에 돌입하면 처음배우는 개발자들이 물음표를 남발할거같다. 적어도 나는 그랬다. 프론트엔드 개발자가 처음배우는 단계가 뭔가? HTML, CSS, JS이다. 이제 각자 코딩을 해서 3가지를 합치면 웹페이지가 뚝딱 만들어지기 때문이다.
하지만 리액트는 어떤데? 리액트는 HTML페이지가 `<div id=root>` 단 하나의 태그를 제외하고는 아무것도 존재하지 않는다. CSR과 SSR의 차이를 여기서부터 이해를 시작하면 좋을거같다.

자 생각해보자.

1. 만약 우리가 CRA, 또는 VITE를 사용하여 리액트 웹페이지를 하나 만들었다고 가장하자.
2. 사용자가 우리의 웹페이지에 방문을 하였다.

여기까지의 과정이 존재한다고 가정했을때 사용자는 리액트웹페이지에 접근하면서 처음에 달랑 `<div id=root>`를 가진 HTML태그를 하나 받는다. 그리고 서버는 HTML을 넘겨주면서 같으 다운로드한 자바스크립트파일도 넘겨줄꺼다. 자바스크립트파일을 받고나면 그제서야 우리가 리액트앱으로 코딩한 JSX구문이 `<div id=root>`안에 들어가면서 페이지가 그려질꺼다.

아직 뭔가 와닿지 않을 수 도 있다.

그럼 이렇게 해보면된다.

1. 만약 우리가 CRA, 또는 VITE를 사용하여 리액트 웹페이지를 하나 만들었다고 가장하자.
2. (자바스크립트를 사용하지 않는)사용자가 우리의 웹페이지에 방문을 하였다.

만약 이렇게 조건을 걸어보자.

물론 자바스크립트를 off하고 사용하는 사용자가 어디있겠냐만... 예시를 들어보자.
그렇게되면 사용자가 우리의 웹페이지에 접근했을때 서버에서는 일단 HTML을 먼저 넘겨줄것이다. 그럼 사용자는 HTML을 받을 것이다. 근데 어라?? 우리가 리액트 웹페이지를 제작할 때 HTML에 코딩을 하였던가...? 그럴리가. 우리는 JSX구문으로 모든 내용을 작성하기때문에 HTML이 존재할리가 없다. `<div id=root>`가 하나 존재할 뿐이다. 그럼 사용자는 자바스크립트를 체크해제하지 않는 이상 절대로 우리의 웹페이지를 볼 수 없을것이다.

CSR. **Client Side Rendering**은 사용자의 클라이언트에서 모든 렌더링을 처리하겠다는거다. 렌더링이 뭔데? 렌더링은 웹 브라우저가 HTML, CSS, JavaScript와 같은 웹 문서의 코드를 해석하고 화면에 그림을 그리는 과정을 말한다.

이쯤에서 이제 SSR에 대해서 알아보자.

### SSR을 알아보자

아까의 조건을 그대로 가져와보겠다. 단, 이번에는 CRA나 VITE를 사용하여 리액트웹을 만드는게 아니라, Next로 제작했다고 예시를 들겠다.

1. 만약 우리가 Next.js를 사용하여 리액트 웹페이지를 하나 만들었다고 가장하자.
2. (자바스크립트를 사용하지 않는)사용자가 우리의 웹페이지에 방문을 하였다.

이렇게 가정하였을때 우리의 웹페이지에 방문하는 사용자는 어떤 화면을 보게될까? CSR과는 다르게 Next.js로 제작한 웹페이지는 HTML페이지를 그대로 볼 수 있다.
개발자가 코딩할 때 HTML을 만들었나? 아니다. 리액트를 사용하여 개발된만큼, JSX를 사용하여 개발되었다. Next.js를 사용하여 제작되었다는 차이만 존재할 뿐.

도대체 무슨 차이가 있는걸까?

답을 먼저 이야기하자면 SSR이기 때문이다.
SSR은 **Server Side Rendering**을 말한다. CSR은 사용자의 클라이언트에서 모든 렌더링과정을 해결했다면, SSR은 Next에서 제공되는 백엔드서버에서 개발자가 코딩한 파일을 HTML로 변환해서 사용자에게 넘겨준다.

그러므로 '(자바스크립트를 사용하지 않는)사용자'가 우리의 웹페이지를 방문했다면 웹페이지 자체는 HTML이 존재하기때문에 보이긴 할꺼다. 다만 동적인 페이지이기 때문에 자바스크립트 엔진이 없어서 기능들이 작동하지 않을뿐.

하지만 사용자 입장에선 지루한 HTML파일일지라도 당장 결과물이 무언가 보이기때문에 만족할 것이다.

이것이 SSR을 더 선호하는 이유라고 할 수 있다. 사용자의 경험을 향상시키는 것.

## 자바스크립트 안쓰는 사용자가 어딨어?? 그냥 CSR써도 되는거 아니야?

물론 CSR이 안좋고 나쁘다는것은 아니다. 다만 현재 트렌드가 SSR로 넘어가는 추세고, 기술도 Next가 제공해주는 편리성이 많기때문에 개발자도 같이 넘어가는 부분이 많이 존재하는 것으로 알고있다.
나 또한 Next의 공부를 미루던 이유가 CSR만으로도 좋은 웹페이지라고 생각했기 때문이었다.

근데 왜 SSR이 더 좋다는 생각을 가지게 되었는가 하면, 아무래도 극단적인 상황에서 내 웹페이지를 누군가 사용하였을때를 생각하니 SSR이 더 효율이 좋겠다고 생각했다.
현재 우리가 한국에 살고있기에 아무런 차이를 못느끼지만, 만약 내가 좀 더 성장해서 좋은 개발자가 되어 더 큰 웹페이지를 개발하게 된다고 하였을 떄에 여러 나라의 사용자들이 내 웹페이지를 방문한다고 생각해봤다.
만약 인터넷환경이 좋지않는 사용자가 내가 만든 웹페이지를 방문하려는데 자바스크립트 다운로드가 느려서 CSR로 렌더링되는 웹페이지가 하얗게 아무것도 보이지않는다고 가정해보자... 사용자는 얼마나 불편할까.

또한 좋은 웹페이지는 항상 검색엔진에도 노출이 잘 되야 하기에 SEO가 유리한 SSR이 더 좋다고 생각한다.

여기까지 SSR과 CSR에 대해서 공부하면서 느낀점과 배운점을 좀 적어봤다.
